<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testimonials - Hamza Babar</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
      /* --- Global Styles & Variables --- */
      :root {
        --panel-bg: rgba(25, 25, 30, 0.45);
        --card-bg: rgba(45, 45, 50, 0.5);
        --border-color: rgba(255, 255, 255, 0.1);
        --text-primary: #f0f0f0;
        --text-secondary: #c0c0c0;
        --glow-color: rgba(100, 181, 246, 0.8);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: url("https://i.imgur.com/u3p4A4h.jpg") no-repeat center
          center fixed; /* Using a placeholder background */
        background-size: cover;
        color: var(--text-primary);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        overflow: hidden;
        padding: 1rem;
      }

      /* --- Main Container for the Testimonials Scene --- */
      .testimonial-container {
        position: relative;
        width: 100%;
        max-width: 1200px;
        height: 85vh;
        border-radius: 28px;
        overflow: hidden;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        background: var(--panel-bg);
        border: 1px solid var(--border-color);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.3);
        perspective: 1000px; /* For 3D transformations */
      }

      #orb-space {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
      }

      /* --- Testimonial Orb Styling --- */
      .testimonial-orb {
        position: absolute;
        width: 90px;
        height: 90px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          var(--glow-color) 5%,
          transparent 60%
        );
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        will-change: transform; /* Performance optimization */
      }
      .testimonial-orb .orb-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        box-shadow: 0 0 20px 5px var(--glow-color);
        opacity: 0.6;
        transition: opacity 0.3s ease-out, box-shadow 0.3s ease-out;
      }
      .testimonial-orb img {
        width: 80%;
        height: 80%;
        border-radius: 50%;
        object-fit: cover;
        filter: blur(4px) grayscale(50%);
        transition: filter 0.3s ease-out;
      }
      .testimonial-orb:hover .orb-glow {
        opacity: 1;
        box-shadow: 0 0 35px 8px var(--glow-color);
      }
      .testimonial-orb:hover img {
        filter: blur(0) grayscale(0%);
      }

      /* --- Active Testimonial Card Styling --- */
      .testimonial-card {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 90%;
        max-width: 600px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 2.5rem;
        text-align: center;
        z-index: 10;
        opacity: 0;
        visibility: hidden; /* Use visibility for better performance */
        transform: translate(-50%, -50%) scale(0.8);
      }
      .testimonial-card img {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 1rem;
        border: 2px solid var(--glow-color);
      }
      .testimonial-card blockquote {
        font-size: 1.1rem;
        line-height: 1.7;
        margin-bottom: 1.5rem;
        font-style: italic;
        color: var(--text-secondary);
      }
      .testimonial-card cite {
        font-size: 1rem;
        font-weight: 500;
        font-style: normal;
        color: var(--text-primary);
      }
      .testimonial-card cite span {
        display: block;
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-top: 0.3rem;
      }

      /* --- Navigation Buttons --- */
      .testimonial-nav {
        position: absolute;
        bottom: 2rem;
        left: 50%;
        z-index: 11;
        opacity: 0;
        visibility: hidden;
        transform: translate(-50%, 10px);
        display: flex;
        gap: 1rem;
      }
      .testimonial-nav button {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        padding: 0.75rem 1.5rem;
        border-radius: 99px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.2s ease-out;
      }
      .testimonial-nav button:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
        border-color: var(--glow-color);
      }
      .testimonial-nav button:active {
        transform: scale(0.95);
      }
    </style>
  </head>
  <body>
    <div class="testimonial-container">
      <div id="orb-space"></div>

      <div class="testimonial-card">
        <img src="" alt="Client Avatar" />
        <blockquote data-testimonial-text></blockquote>
        <cite>
          <span data-client-name></span>
          <span data-client-company></span>
        </cite>
      </div>

      <div class="testimonial-nav">
        <button id="prev-btn"><i class="ph-bold ph-arrow-left"></i></button>
        <button id="close-btn"><i class="ph-bold ph-x"></i></button>
        <button id="next-btn"><i class="ph-bold ph-arrow-right"></i></button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const orbSpace = document.getElementById("orb-space");
        const testimonialCard = document.querySelector(".testimonial-card");
        const testimonialNav = document.querySelector(".testimonial-nav");

        // Check if elements exist
        if (!orbSpace || !testimonialCard || !testimonialNav) {
          console.error("Required elements not found in the DOM.");
          return;
        }

        const clientAvatarEl = testimonialCard.querySelector("img");
        const testimonialTextEl = testimonialCard.querySelector("blockquote");
        const clientNameEl =
          testimonialCard.querySelector("[data-client-name]");
        const clientCompanyEl = testimonialCard.querySelector(
          "[data-client-company]"
        );

        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        const closeBtn = document.getElementById("close-btn");

        // [FIXED] Corrected Image URLs
        const testimonialsData = [
          {
            avatar: "https://i.pravatar.cc/150?u=aisha",
            text: "Hamza is a highly skilled front-end developer. He turned our vision into a stunning reality with his clean code and creative solutions. Highly recommended!",
            clientName: "Aisha Khan",
            company: "Tech Solutions Inc.",
          },
          {
            avatar: "https://i.pravatar.cc/150?u=imran",
            text: "Working with Hamza was a fantastic experience. His communication was excellent, and he delivered the project ahead of schedule with exceptional quality.",
            clientName: "Imran Ali",
            company: "Global Innovations Ltd.",
          },
          {
            avatar: "https://i.pravatar.cc/150?u=sana",
            text: "We were looking for a developer who could bring our complex UI designs to life, and Hamza exceeded our expectations. His attention to detail is remarkable.",
            clientName: "Sana Rizvi",
            company: "Creative Agency PK",
          },
          {
            avatar: "https://i.pravatar.cc/150?u=bilal",
            text: "The final product was not only beautiful but also incredibly fast and responsive. A true professional who understands both design and performance.",
            clientName: "Bilal Ahmed",
            company: "E-commerce Experts",
          },
        ];

        let activeIndex = -1;
        const orbs = [];

        // --- Create and Animate Orbs ---
        testimonialsData.forEach((testimonial, index) => {
          const orb = document.createElement("div");
          orb.className = "testimonial-orb";
          orb.innerHTML = `<div class="orb-glow"></div><img src="${testimonial.avatar}" alt="${testimonial.clientName}">`;

          const orbData = {
            element: orb,
            x: Math.random() * (orbSpace.clientWidth - 90),
            y: Math.random() * (orbSpace.clientHeight - 90),
            z: Math.random() * 200 - 100,
            vx: (Math.random() - 0.5) * 0.5,
            vy: (Math.random() - 0.5) * 0.5,
            vz: (Math.random() - 0.5) * 0.1,
          };

          orb.addEventListener("click", () => showTestimonial(index));
          orbSpace.appendChild(orb);
          orbs.push(orbData);
        });

        function animateOrbs() {
          orbs.forEach((orbData) => {
            orbData.x += orbData.vx;
            orbData.y += orbData.vy;
            orbData.z += orbData.vz;

            if (orbData.x <= 0 || orbData.x >= orbSpace.clientWidth - 90)
              orbData.vx *= -1;
            if (orbData.y <= 0 || orbData.y >= orbSpace.clientHeight - 90)
              orbData.vy *= -1;
            if (orbData.z <= -200 || orbData.z >= 200) orbData.vz *= -1;

            orbData.element.style.transform = `translate3d(${orbData.x}px, ${orbData.y}px, ${orbData.z}px)`;
          });
          requestAnimationFrame(animateOrbs);
        }
        animateOrbs(); // Start the floating animation

        // --- Show/Hide Logic ---
        function showTestimonial(index) {
          if (activeIndex === index) return;
          activeIndex = index;
          const testimonial = testimonialsData[index];

          clientAvatarEl.src = testimonial.avatar;
          testimonialTextEl.textContent = testimonial.text;
          clientNameEl.textContent = testimonial.clientName;
          clientCompanyEl.textContent = testimonial.company;

          // Animate Orbs and Card with GSAP
          gsap.to(
            orbs.map((o) => o.element),
            { opacity: 0.1, scale: 0.8, duration: 0.5, stagger: 0.05 }
          );
          gsap.to(testimonialCard, {
            opacity: 1,
            visibility: "visible",
            scale: 1,
            duration: 0.5,
            delay: 0.2,
          });
          gsap.to(testimonialNav, {
            opacity: 1,
            visibility: "visible",
            y: 0,
            duration: 0.5,
            delay: 0.4,
          });
        }

        function hideTestimonial() {
          activeIndex = -1;
          gsap.to(
            orbs.map((o) => o.element),
            { opacity: 1, scale: 1, duration: 0.5, stagger: 0.05 }
          );
          gsap.to(testimonialCard, {
            opacity: 0,
            scale: 0.8,
            duration: 0.3,
            onComplete: () => (testimonialCard.style.visibility = "hidden"),
          });
          gsap.to(testimonialNav, {
            opacity: 0,
            y: 10,
            duration: 0.3,
            onComplete: () => (testimonialNav.style.visibility = "hidden"),
          });
        }

        function showNext() {
          const newIndex = (activeIndex + 1) % testimonialsData.length;
          showTestimonial(newIndex);
        }

        function showPrev() {
          const newIndex =
            (activeIndex - 1 + testimonialsData.length) %
            testimonialsData.length;
          showTestimonial(newIndex);
        }

        // --- Event Listeners ---
        closeBtn.addEventListener("click", hideTestimonial);
        nextBtn.addEventListener("click", showNext);
        prevBtn.addEventListener("click", showPrev);
      });
    </script>
  </body>
</html>
