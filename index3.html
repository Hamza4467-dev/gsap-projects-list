<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Notes App</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f4f6f8;
        color: #333;
      }
      header {
        padding: 1rem;
        background: #4a90e2;
        color: #fff;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      header input {
        padding: 5px 10px;
        border-radius: 5px;
        border: none;
        outline: none;
      }
      .container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
      }
      .notes {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
      }
      .card {
        background: #fff;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: relative;
      }
      .card h3 {
        margin: 0 0 10px;
      }
      .card p {
        font-size: 14px;
      }
      .tags {
        margin-top: 10px;
        font-size: 12px;
        color: #666;
      }
      .card .actions {
        margin-top: 10px;
        display: flex;
        gap: 10px;
      }
      .card .actions button {
        border: none;
        background: none;
        cursor: pointer;
        font-size: 14px;
        color: #4a90e2;
      }
      .pin {
        position: absolute;
        right: 10px;
        top: 10px;
        cursor: pointer;
      }
      .add-btn {
        position: fixed;
        right: 20px;
        bottom: 20px;
        background: #4a90e2;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      }
      /* Popup */
      .popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
        display: none;
        justify-content: center;
        align-items: center;
      }
      .popup-content {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        width: 300px;
      }
      .popup-content input,
      .popup-content textarea {
        width: 100%;
        margin: 5px 0;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .pagination {
        text-align: center;
        margin-top: 20px;
      }
      .pagination button {
        margin: 0 5px;
        padding: 5px 10px;
        border: none;
        background: #4a90e2;
        color: white;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <h2>Notes App</h2>
      <input type="text" id="search" placeholder="Search notes..." />
    </header>

    <div class="container">
      <div class="notes" id="notes"></div>
      <div class="pagination" id="pagination"></div>
    </div>

    <button class="add-btn" id="openPopup">+</button>

    <div class="popup" id="popup">
      <div class="popup-content">
        <h3>Add Note</h3>
        <input type="text" id="title" placeholder="Title" />
        <textarea id="desc" rows="3" placeholder="Description"></textarea>
        <input type="date" id="date" />
        <input type="text" id="tags" placeholder="Tags (comma separated)" />
        <button onclick="saveNote()">Save</button>
        <button onclick="closePopup()">Cancel</button>
      </div>
    </div>

    <script>
      let notes = [];
      let currentPage = 1;
      const notesPerPage = 6;

      const notesContainer = document.getElementById("notes");
      const popup = document.getElementById("popup");
      const searchInput = document.getElementById("search");
      const pagination = document.getElementById("pagination");

      document.getElementById("openPopup").onclick = () =>
        (popup.style.display = "flex");
      function closePopup() {
        popup.style.display = "none";
      }

      function saveNote() {
        const title = document.getElementById("title").value;
        const desc = document.getElementById("desc").value;
        const date = document.getElementById("date").value;
        const tags = document.getElementById("tags").value;

        if (!title || !desc) return alert("Title & Description required!");

        notes.push({ title, desc, date, tags, pinned: false });
        document.getElementById("title").value = "";
        document.getElementById("desc").value = "";
        document.getElementById("date").value = "";
        document.getElementById("tags").value = "";
        closePopup();
        renderNotes();
      }

      function renderNotes() {
        let filtered = notes.filter(
          (n) =>
            n.title.toLowerCase().includes(searchInput.value.toLowerCase()) ||
            n.desc.toLowerCase().includes(searchInput.value.toLowerCase()) ||
            n.tags.toLowerCase().includes(searchInput.value.toLowerCase())
        );

        filtered.sort((a, b) => b.pinned - a.pinned);

        const start = (currentPage - 1) * notesPerPage;
        const end = start + notesPerPage;
        const paginated = filtered.slice(start, end);

        notesContainer.innerHTML = "";
        paginated.forEach((n, i) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
        <span class="pin" onclick="togglePin(${i + start})">${
            n.pinned ? "üìå" : "üìç"
          }</span>
        <h3>${n.title}</h3>
        <p>${n.desc}</p>
        <small>${n.date}</small>
        <div class="tags">#${n.tags.split(",").join(" #")}</div>
        <div class="actions">
          <button onclick="editNote(${i + start})">Edit</button>
          <button onclick="deleteNote(${i + start})">Delete</button>
        </div>
      `;
          notesContainer.appendChild(card);
        });

        renderPagination(filtered.length);
      }

      function togglePin(i) {
        notes[i].pinned = !notes[i].pinned;
        renderNotes();
      }

      function deleteNote(i) {
        if (confirm("Delete this note?")) {
          notes.splice(i, 1);
          renderNotes();
        }
      }

      function editNote(i) {
        document.getElementById("title").value = notes[i].title;
        document.getElementById("desc").value = notes[i].desc;
        document.getElementById("date").value = notes[i].date;
        document.getElementById("tags").value = notes[i].tags;
        popup.style.display = "flex";
        notes.splice(i, 1); // remove old version, will be re-added when saved
      }

      function renderPagination(total) {
        const pages = Math.ceil(total / notesPerPage);
        pagination.innerHTML = "";
        for (let i = 1; i <= pages; i++) {
          const btn = document.createElement("button");
          btn.textContent = i;
          btn.onclick = () => {
            currentPage = i;
            renderNotes();
          };
          if (i === currentPage) btn.style.background = "#333";
          pagination.appendChild(btn);
        }
      }

      searchInput.addEventListener("input", () => {
        currentPage = 1;
        renderNotes();
      });
    </script>
  </body>
</html>
